<script>
	document.readyState == "loading" ?
		document.addEventListener("DOMContentLoaded", srinit) :
		srinit()

	function srinit ()
	{
		try
		{
			const style = document.createElement('style')            
			document.head.appendChild(style)    
			style.sheet.insertRule("nav div > a[href='#/cards'] { display: none; }")
		}
		catch (ex)
		{
			console.error(ex)
		}

		try
		{
			const metadesc = document.querySelector("meta[name=description]")
			if (metadesc)
				document.querySelector("p[class*=--seo-search-banner]").textContent = metadesc.content
		}
		catch (ex)
		{
			console.error(ex)
		}

		try
		{
			document.addEventListener("click", (ev) =>
			{
				if (ev.target.className.match(/--iconSearchImage\s/))
				{
					const search = document.querySelector("[class*=--icon-close-search-mob]")

					search.classList.toggle("open")

					if (search.classList.contains("open"))
						search.focus()
				}
			})
		}
		catch (ex)
		{
			console.error(ex)
		}
	}
</script>
<link rel="stylesheet" href="https://pillin.myvtex.com/files/pillin-custom-account.css" />
<meta name="referrer" content="no-referrer-when-downgrade">
<script>
  (function() {
    console.log("Tallas script ran from pixel");
  })()

/* --------------------------------------------------------------------------------- */

function find_parent(n,e)
{
  while ( e && e.nodeName !== n ) e = e.parentNode;
  return e;
}

document.addEventListener('click', function(evt)
{
  if (evt == null) return;

try
{
  let temp0 = evt.target;
  let filtrar = false;

  if ( temp0.firstChild.data == "Filtrar") filtrar = true;
 // if ( temp0.firstChild.data == "GuÃ­a de Tallas") alert('');
  if ( temp0.firstChild.firstChild !== null && temp0.firstChild.firstChild.data == "Filtrar") filtrar = true;

  if (filtrar)
  {
    let tallas = document.querySelectorAll('.selected_talla');
    let titulo = document.querySelector('.vtex-rich-text-0-x-paragraph--tituloModal').firstChild.data;
    let re1    = /listItem--([^-\s]+)--mapequals([^-\s]+)---([^-\s]+)[-]*specificationFilter-([0-9]+)/;
    let re2    = /menuItem--([^-\s]+)-specificationFilter_([0-9]+) /;
    
    let tipo = '', extra='';
    let cat = '', map='', tip='', sf='', url='', uri='';
    
    if (titulo == "Accesorios")
    {
      re2    = /menuItem--([^\s]+)-specificationFilter_([0-9]+)/;
      url = "/"+titulo.toLowerCase()+"/";
      map = 'c';
    }
    else
    {
      let tipo   = document.querySelector('.vtex-tab-layout-0-x-listItemActive');
      let t = re1.exec( tipo.classList );

      if ( t==null) return;
    
      if ( t.length > 3)
      {   
        cat = t[1];
        map = t[2];
        tip = t[3];
        sf  = t[4];
      }   
      else
        return;
      
      url = "/"+cat+"/";
      uri = ""; 
      extra = ",specificationFilter_" + sf;
    }

    tallas.forEach( (x)=>
    {
      let d = re2.exec( x.classList );
      if (d==null) return;
      url += d[1].toLowerCase() + "/";
      uri += ",specificationFilter_"+d[2];
    });
    url += tip + "?map=" + map + uri + extra;
    
    top.location.href = url;
    return;
  }

  if ( temp0.className.indexOf("-specificationFilter")>0 )
  {
    if ( temp0.nodeName != "LI" )
    {
      temp0 = find_parent("LI",temp0);
      if (temp0 == null) return;
    }

    if (temp0.classList.contains('selected_talla'))
    {
      temp0.classList.remove("selected_talla");
      temp0.style.background = '';
    }
    else
    {
      temp0.classList.add("selected_talla");
      temp0.style.background = '#ece3cc';
    }
  }

}
catch(e)
{
}


}
, true);

/* ---------------------------------------------------------------------------------------- */

</script>
